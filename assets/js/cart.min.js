!function(){const cartDOMElement=document.querySelector(".js-cart");if(!cartDOMElement)return;let totalQuantity;const cart=JSON.parse(localStorage.getItem("cart"))||{},updateQuantity=(id,quantity)=>{const cartItemDOMElement=cartDOMElement.querySelector(`[data-product-id="${id}"]`),cartItemQuantityDOMElement=cartItemDOMElement.querySelector(".js-cart-item-quantity"),cartItemPriceDOMElement=cartItemDOMElement.querySelector(".js-cart-item-price");cart[id].quantity=quantity,cartItemQuantityDOMElement.value=quantity,cartItemPriceDOMElement.textContent="$ "+quantity*cart[id].price,updateCart()},increaseQuantity=(id,quantity)=>{const newQuantity=Number(cart[id].quantity)+Number(quantity);updateQuantity(id,newQuantity<=99?newQuantity:99)},decreaseQuantity=id=>{const newQuantity=cart[id].quantity-1;newQuantity>=1&&updateQuantity(id,newQuantity)},getProductData=productDOMElement=>{const id=productDOMElement.getAttribute("data-product-id"),name=productDOMElement.getAttribute("data-product-name"),price=productDOMElement.getAttribute("data-product-price"),weight=productDOMElement.getAttribute("data-product-weight"),weightOz=productDOMElement.getAttribute("data-product-weight-oz"),src=productDOMElement.getAttribute("data-product-src"),quantity=productDOMElement.querySelector("input").value;return{name:name,price:price,src:src,quantity:quantity,id:id,weight:weight,weightOz:weightOz}},cartItemsCounterDOMElement=document.querySelector(".js-cart-total-count-items"),cartItemsCounterCornerDOMElement=document.querySelector(".js-cart-total-count-items-corner"),cartTotalPriceDOMElement=document.querySelector(".js-cart-total-price"),renderCartItem=({id:id,name:name,src:src,price:price,quantity:quantity,weight:weight,weightOz:weightOz})=>{const cartItemDOMElement=document.createElement("div"),summitem=price*quantity,cartItemTemplate=`\n                    <div class="cart-item">\n                    <a href=""><figure class="bg-cover js-btn-item-info" style="background-image: url(${src});"></figure></a>\n                      <div class="cart-item-content">\n                        <a class="name js-btn-item-info" href="">${name}</a>\n                        <div class="cart-item-price-weight">\n                          <p><span class="price js-cart-item-price font-moonglade">$ ${price}</span> <span class="weight font-moonglade">(${weight}g / ${weightOz}oz)</span></p>\n                          <p class="total-price">$ ${summitem}</p>\n                        </div>\n                        <div class="btn-wrap">\n                          <div class="counter">\n                            <button class="minus js-btn-product-decrease-quantity">-</button>\n                            <input type="number" class="js-cart-item-quantity" value="${quantity}" min="1" max="99" readonly>\n                            <button class="plus js-btn-product-increase-quantity">+</button>\n                          </div>\n                          <button class="btn-remove js-btn-cart-item-remove">Remove</button>\n                        </div>\n                      </div>\n                    </div>\n    `;cartItemDOMElement.innerHTML=cartItemTemplate,cartItemDOMElement.setAttribute("data-product-id",id),cartItemDOMElement.classList.add("js-cart-item"),cartDOMElement.appendChild(cartItemDOMElement)},saveCart=()=>{localStorage.setItem("cart",JSON.stringify(cart))},updateCartTotalPrice=()=>{const totalPrice=Object.keys(cart).reduce((acc,id)=>{const{quantity:quantity,price:price}=cart[id];return acc+price*quantity},0);cartTotalPriceDOMElement&&(cartTotalPriceDOMElement.textContent="$ "+totalPrice)},updateCartTotalItemsCounter=()=>(totalQuantity=Object.keys(cart).reduce((acc,id)=>{const{quantity:quantity}=cart[id];return acc+Number(quantity)},0),cartItemsCounterDOMElement&&(cartItemsCounterDOMElement.textContent=`YOUR CART (${totalQuantity})`,cartItemsCounterCornerDOMElement.textContent=totalQuantity),totalQuantity),updateCart=()=>{totalQuantity=updateCartTotalItemsCounter(),updateCartTotalPrice(),saveCart(),0===totalQuantity&&$("body").hasClass("noscroll")&&($(".modal-cart-empty").addClass("active"),$(".modal-cart-not-empty").removeClass("active"))},deleteCartItem=id=>{const cartItemDOMElement=cartDOMElement.querySelector(`[data-product-id="${id}"]`);cartDOMElement.removeChild(cartItemDOMElement),delete cart[id],updateCart()},addCartItem=data=>{const{id:id}=data;cart[id]?increaseQuantity(id,data.quantity):(cart[id]=data,renderCartItem(data),updateCart())},renderCart=()=>{const ids=Object.keys(cart);ids.forEach(id=>renderCartItem(cart[id]))},cartInit=()=>{renderCart(),updateCart(),document.querySelector("body").addEventListener("click",e=>{const target=e.target;if(target.classList.contains("js-btn-item-info")){e.preventDefault();const cartItemDOMElement=target.closest(".js-cart-item"),productID=cartItemDOMElement.getAttribute("data-product-id");console.log(productID);const modalCartNotEmpty=document.querySelector(".modal-cart-not-empty");modalCartNotEmpty.classList.remove("active");const modalShadow=document.querySelector(".modal-shadow");modalShadow.classList.remove("active"),modalShadow.style.display="none",document.body.classList.remove("noscroll"),elementHtml=document.querySelector(".no-touchevents"),elementHtml.classList.add("popup--opened"),elementProductInfo=document.getElementById(productID),elementProductInfo.classList.remove("is-hidden"),elementProductInfo.classList.add("is-active"),document.body.style.overflow="hidden"}if(target.classList.contains("js-btn-add-to-cart")){e.preventDefault();const productDOMElement=target.closest(".js-product"),data=getProductData(productDOMElement);addCartItem(data)}if(target.classList.contains("js-btn-cart-item-remove")){e.preventDefault();const cartItemDOMElement=target.closest(".js-cart-item"),productID=cartItemDOMElement.getAttribute("data-product-id");deleteCartItem(productID)}if(target.classList.contains("js-btn-product-increase-quantity")){e.preventDefault();const cartItemDOMElement=target.closest(".js-cart-item"),productID=cartItemDOMElement.getAttribute("data-product-id");increaseQuantity(productID,1)}if(target.classList.contains("js-btn-product-decrease-quantity")){e.preventDefault();const cartItemDOMElement=target.closest(".js-cart-item"),productID=cartItemDOMElement.getAttribute("data-product-id");decreaseQuantity(productID)}target.classList.contains("js-btn-show-cart")&&($("body").addClass("noscroll"),$(".modal-shadow").fadeIn(),$(".modal-shadow").addClass("active"),totalQuantity>0?$(".modal-cart-not-empty").addClass("active"):$(".modal-cart-empty").addClass("active")),target.classList.contains("js-btn-checkout")&&(location.href="WPJS/checkout-customer")})};cartInit()}();